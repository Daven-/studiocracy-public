/* native javascript implementation */

document.addEventListener('DOMContentLoaded', replyEventListeners);

function appendReplyBox () {
    /*
        postedBool : checks if the comment-box already exists under the comment.
            By default it doesn't until we search through to see if it exists.
        parent : this is the parent div of the comment. The class should be "ind_comment_parent", and the id TBD
        childrenNodes : an array of all nodes within the parent generated by `childNodes` attr in JS.
        node : the reply-box div and the textarea and button within it
    */
    var postedBool = false, parent = this.parentNode, parentID = parent.id;

    var childrenNodes = document.getElementById(parentID).childNodes;
    for (var x = 0; x < childrenNodes.length; x++) {
        if (childrenNodes[x].className === 'reply-box') {
            postedBool = true;
        }
    }

    if (postedBool === false) {
        var node = document.createElement('div'); // create a div
        node.className = "reply-box"; // with a class name of reply box

        node.innerHTML = '<textarea rows=3 cols=80></textarea>\n<button>save</button>'; // create textarea
        parent.appendChild(node); // append the node to parent
    } else {
        // do nothing
    }
}

function replyEventListeners () {
    var replyElems = document.getElementsByClassName('reply');
    for (var x = 0; x < replyElems.length; x++) {
        replyElems[x].addEventListener('click', appendReplyBox);
    }
}